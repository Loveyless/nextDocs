---
title: 如何在 Next.js 中配置 Babel
nav_title: Babel
description: 使用你自己的配置扩展 Next.js 添加的 babel 预设。
---

<details>
  <summary>示例</summary>

- [自定义 babel 配置](https://github.com/vercel/next.js/tree/canary/examples/with-custom-babel-config)

</details>

Next.js 包含 `next/babel` 预设到你的应用中，它包含了编译 React 应用和服务器端代码所需的一切。但如果你想扩展默认的 Babel 配置，这也是可能的。

## 添加预设和插件

首先，你只需要在项目的根目录中定义一个 `.babelrc` 文件（或 `babel.config.js`）。如果找到这样的文件，它将被视为_真相的来源_，因此它也需要定义 Next.js 所需的内容，即 `next/babel` 预设。

这里是一个 `.babelrc` 文件的示例：

```json filename=".babelrc"
{
  "presets": ["next/babel"],
  "plugins": []
}
```

你可以[查看这个文件](https://github.com/vercel/next.js/blob/canary/packages/next/src/build/babel/preset.ts)来了解 `next/babel` 包含的预设。

要添加预设/插件**而不配置它们**，你可以这样做：

```json filename=".babelrc"
{
  "presets": ["next/babel"],
  "plugins": ["@babel/plugin-proposal-do-expressions"]
}
```

## 自定义预设和插件

要添加预设/插件**带自定义配置**，在 `next/babel` 预设上这样做：

```json filename=".babelrc"
{
  "presets": [
    [
      "next/babel",
      {
        "preset-env": {},
        "transform-runtime": {},
        "styled-jsx": {},
        "class-properties": {}
      }
    ]
  ],
  "plugins": []
}
```

要了解每个配置的可用选项，请访问 babel 的[文档](https://babeljs.io/docs/)网站。

> **了解更多**：
>
> - Next.js 使用[**当前** Node.js 版本](https://github.com/nodejs/release#release-schedule)进行服务器端编译。
> - `"preset-env"` 上的 `modules` 选项应保持为 `false`，否则 webpack 代码分割会被关闭。
